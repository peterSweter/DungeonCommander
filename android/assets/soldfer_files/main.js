'use strict';jQuery.fn.exists=function(){return this.length>0;};(function($){$(document).on('mouseover','.header-nav li',function(){if($(window).width()>=768){if($(this).find('.header-nav__link__dropdown').length>0){$(this).find('> a').closest('li').addClass('active');$(this).find('> .header-nav__link__dropdown').show();}}});$(document).on('mouseleave','.header-nav li',function(){if($(window).width()>=768){if($(this).find('.header-nav__link__dropdown').length>0){$(this).find('> a').closest('li').removeClass('active');$(this).find('> .header-nav__link__dropdown').hide();}}});var $wrap=$('.wrap');$wrap.on('scroll',function(e){if(this.scrollTop>100){$wrap.addClass('has-sticky-nav');}
else{$wrap.removeClass('has-sticky-nav');}});$(document).on('click','.header-primary__mobile-menu-btn',function(e){e.preventDefault();if($('.header-secondary').is(':hidden')){$('.header-secondary').slideDown();}
else{$('.header-secondary').slideUp();}});$(document).on('click','.header-nav li a',function(e){if($(window).width()<768){if(!$(this).closest('li').hasClass('active')){if($(this).closest('li').find('.header-nav__link__dropdown').length>0){e.preventDefault();$(this).closest('li').find('> a').closest('li').addClass('active');$(this).closest('li').find('> .header-nav__link__dropdown').slideDown();}}}});if($('.item__banner').exists()){var canvasEl=document.createElement('canvas');if(canvasEl.getContext){$('.item__banner--blurred').blurjs({source:'.item__banner',radius:5,}).animate({opacity:0.25,},800);}
else{$('.item__banner').css('background-size','cover');}}
else{$('.item__banner').css('background-size','cover');}
$('a[href^="#"]').click(function(e){if($(this.hash).exists()){e.preventDefault();$('html,body').animate({scrollTop:$(this.hash).offset().top,},400);}});if($('.js-links-new-tab').exists()){$('.js-links-new-tab').find('a').attr('target','_blank');}
$('[rel="tooltip"]').tooltip({container:'body',});$('[rel="popover"]').popover({container:'body',trigger:'hover',});$('time').timeago();$('.js-review-rating').raty({path:'../../images',starOn:'icon-star-whole-single.png',starHalf:'icon-star-half-single.png',starOff:'icon-star-empty-single.png',scoreName:'AssetReview[rating]',half:true,hints:['','','','',''],});$(document).on('click','.js-comment-reply',function(e){var tempString;e.preventDefault();$('input[name*="reply_id"]').val($(this).attr('data-reply-id'));$('.product-discussion-message').val('@'+ $(this).attr('data-reply-username')+' ').focus();tempString=$('.product-discussion-message').val();$('.product-discussion-message').val('').val(tempString).animate({boxShadow:'0 0 14px #38855e',}).animate({boxShadow:'0 2px 6px rgba(0,0,0,0.05)',});});$(document).on('click','.js-community-reply',function(e){$('.trumbowyg-editor').text('@'+ $(this).attr('data-reply-username')+' ').focus();});document.addEventListener('play',function(e){var audios=document.getElementsByTagName('audio');for(var i=0,len=audios.length;i<len;i++){if(audios[i]!==e.target){audios[i].pause();$('.js-selective-audio-trigger[data-play-audio$="'+ $(audios[i]).attr('data-src')+'"]').find('.fa-pause').removeClass('fa-pause').addClass('fa-play');}}},true);$('.js-selective-audio-trigger').click(function(){var $audio_player=$('.js-selective-audio-player[data-src$="'+ $(this).attr('data-play-audio')+'"]');if($audio_player.attr('src')===''){$audio_player.attr('src',$audio_player.attr('data-src'));}
if(!$audio_player[0].paused){$audio_player[0].pause();$(this).find('.fa').removeClass('fa-pause').addClass('fa-play');}
else{$audio_player[0].play();$(this).find('.fa').removeClass('fa-play').addClass('fa-pause');}});var btnsGrps=$.trumbowyg.btnsGrps;$('.js-trumbowyg').trumbowyg({btns:['bold','italic','link',btnsGrps.lists],removeformatPasted:true,autogrow:true});$('.js-trumbowyg--with-images').trumbowyg({btns:['bold','italic','link','insertImage',btnsGrps.lists],removeformatPasted:true,autogrow:true});$(document).on('click','.trumbowyg-insertImage-button',function(){$('.trumbowyg-input-infos span:contains("Description")').closest('label').hide();});$('.js-select-change-submit').find('select').change(function(){$(this).parents('form').submit();});$(document).on('click','#lightbox',function(event){event=event||window.event;var target=event.target||event.srcElement,link=target.src?target.parentNode:target,options={index:link,event:event},links=this.getElementsByTagName('a');blueimp.Gallery(links,options);});if($('input[name="Withdrawal[requested_all]"]').exists()){$('input[name="Withdrawal[requested_all]"]').change(function(){if($(this).val()==='0'){$('.js-withdrawal-amount').slideDown('fast');}
else{$('.js-withdrawal-amount').hide().find('input').val('');}});}
if($('.progression-playlist').exists()){$('.progression-playlist').mediaelementplayer({audioWidth:400,audioHeight:40,startVolume:0.75,loop:true,features:['playlistfeature','playpause','current','progress','duration','tracks','volume'],playlist:true,playlistposition:'bottom',});}
if($('.progression-single').exists()){$('.progression-single').mediaelementplayer({audioWidth:400,audioHeight:40,startVolume:0.75,loop:true,features:['playpause','current','progress','duration','tracks','volume'],});}
$(document).on('click','[data-click-show]',function(e){var $click_element=$('[data-click-element="'+ $(this).attr('data-click-show')+'"]');e.preventDefault();$(this).remove();$click_element.find('img[data-src]').each(function(index){var img_src=$(this).attr('data-src');$(this).attr('src',img_src).removeAttr('data-src');});$click_element.show();});if($('.js-asset-category:last-of-type').exists()){$(document).on('change','.js-asset-category',function(){var $nextCategory=$('#category-list').find('li[data-value="'+ $(this).val()+'"] > ul');$(this).nextAll('.js-asset-category').remove();if($nextCategory.length>0){$('.js-asset-category').attr('name','Asset[category_id_temp]');$('.js-asset-category:last-of-type').after('<select name="Asset[category_id_temp]" class="form-control js-asset-category" style="display:none"></select>');$nextCategory.find('> li').each(function(){$('.js-asset-category:last-of-type').append('<option value="'+ $(this).attr('data-value')+'">'+ $(this).clone().children().remove().end().text()+'</option>');});$('.js-asset-category:last-of-type').prepend('<option value="">Subcategory</option>').fadeIn();}
else{$('.js-asset-category:last-of-type').css('border','1px solid green').attr('name','Asset[category_id]');}});}
$('.js-asset-submit-btn').click(function(e){e.preventDefault();if($('.js-asset-upload-field').val().match('.zip$')){if($('.js-zip-upload-error').exists()){$('.js-zip-upload-error').hide();}
$(this).hide();$('.upload-in-progress').fadeIn('fast');$('#zip-upload-form').submit();}
else{if($('.js-zip-upload-error').exists()){$('.js-zip-upload-error').hide();}
$('#zip-upload-form').prepend('<div class="alert alert-danger js-zip-upload-error"><p>Please select a ZIP file to upload.</p></div>');}});$('.cart__item__remove').click(function(e){if(confirm("Are you sure you want to remove this asset?")===true){$(this).closest('.cart__item').fadeOut('fast');}
else{e.preventDefault();}});})(jQuery);